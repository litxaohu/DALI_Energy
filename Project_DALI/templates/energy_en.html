{% extends 'base_en.html' %}
{% block content %}
<div class="actions-bar">
  <div class="mode-group">
    <span class="mode-label">Scene Mode:</span>
    <button class="mode-btn" data-mode="eco">Eco</button>
    <button class="mode-btn active" data-mode="warm">Warm</button>
    <button class="mode-btn" data-mode="breathing">Breath</button>
    <button class="mode-btn" data-mode="high">High</button>
    <button class="mode-btn" data-mode="off">Off</button>
  </div>
</div>
<div class="grid" style="grid-template-columns:1fr 1fr;">
  <section class="panel">
    <h2>Energy Distribution</h2>
    <div id="energy-distribution" class="energy-distribution">
      <div class="tariff">
        <span>Tariff Mode</span>
        <button id="tariff-toggle" class="toggle-btn" data-mode="low">Low Tariff</button>
      </div>
      <svg id="energy-flows" class="flow-svg"></svg>
      <div class="node grid" id="node-grid"><div class="label">Grid</div><div class="value"><div class="val-orange"><span id="val-grid-to-batt-kwh">0 kWh</span></div><div class="val-blue"><span id="val-grid-to-house-kwh">0 kWh</span></div></div></div>
      <div class="node battery" id="node-battery"><div class="label">Battery</div><div class="value"><div class="icon-orange">âš¡ <span id="val-batt-charge-kw">0 kW</span></div><div class="icon-blue">âš¡ <span id="val-batt-to-house-kw">0 kW</span></div><div class="icon-orange">ðŸ”‹ <span id="val-batt-soc">0%</span> / <span id="val-batt-rem-kwh">0 kWh</span> Â· <span id="val-batt-time-left">0 h</span></div></div></div>
      <div class="node house" id="node-house"><div class="label">Building</div><div class="value" id="val-house">0 kWh</div><div class="sub">Supply Source: <span id="supply-source">Grid</span></div></div>
    </div>
  </section>
  <section class="panel">
    <h2>Data Sources</h2>
    <div id="energy-sources-table" class="sources-table"></div>
  </section>
  <section class="panel">
    <h2>Power</h2>
    <div class="legend-note"><span class="legend-dot blue"></span>Grid <span class="legend-dot pink"></span>Battery <span class="legend-dot orange"></span>Building</div>
    <div id="energy-power-chart" style="width:100%;height:320px;"></div>
  </section>
  <section class="panel">
    <h2>Consumption</h2>
    <div class="legend-note"><span class="legend-dot blue"></span>Grid <span class="legend-dot pink"></span>Battery <span class="legend-dot orange"></span>Building</div>
    <div id="energy-consumption-chart" style="width:100%;height:320px;"></div>
  </section>
  <section class="panel">
    <h2>Price History</h2>
    <div class="chart-tabs" id="price-tabs">
      <button data-period="realtime" class="tab active">Realtime</button>
      <button data-period="day" class="tab">Day</button>
      <button data-period="week" class="tab">Week</button>
      <button data-period="month" class="tab">Month</button>
    </div>
    <div class="chart-controls">
      <select id="price-unit">
        <option value="CNY">CNY/kWh</option>
        <option value="USD">$/kWh</option>
        <option value="EUR">â‚¬/kWh</option>
      </select>
      <button id="price-refresh">Refresh</button>
    </div>
    <div id="price-chart" style="width:100%;height:280px;"></div>
  </section>
  <section class="panel">
    <h2>Cost History</h2>
    <div class="chart-tabs" id="fee-tabs">
      <button data-period="realtime" class="tab active">Realtime</button>
      <button data-period="day" class="tab">Day</button>
      <button data-period="week" class="tab">Week</button>
      <button data-period="month" class="tab">Month</button>
    </div>
    <div class="chart-controls">
      <select id="fee-unit">
        <option value="CNY">CNY</option>
        <option value="USD">$</option>
        <option value="EUR">â‚¬</option>
      </select>
      <button id="fee-refresh">Refresh</button>
    </div>
    <div id="fee-chart" style="width:100%;height:280px;"></div>
  </section>
</div>
{% endblock %}
