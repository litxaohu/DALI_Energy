{% extends 'base.html' %}
{% block content %}
<section class="panel">
  <h2>灯光控制</h2>
  <div class="controls">
    <div>
      <label>串口</label>
      <select id="port-select"></select>
      <button id="port-refresh">刷新串口</button>
      <button id="port-confirm">确认串口</button>
      <span id="port-status" class="serial-status">未设置</span>
    </div>
    <div class="add-form">
      <input type="text" id="gw-hex" placeholder="网关地址(十六进制, 如 01)" value="01">
      <input type="text" id="dev-addr-hex" placeholder="设备号(十六进制, 如 06)">
      <input type="text" id="dev-name" placeholder="灯光名称">
      <button id="add-light">添加灯具</button>
    </div>
    <div class="hint">发送指令格式: 28 + 01 + 网关地址 + 12 + (设备号×2→十六进制) + 控制指令(亮度0-255) + 校验和</div>
  </div>
  <div id="lights-grid" class="lights-grid"></div>
  <div class="actions">
    <button id="export-devices">导出设备配置</button>
  </div>
{% endblock %}
